params.outdir           = "results"
params.help             = false
params.prebuild_idx     = true
params.cpus             = 1
params.memory           = 4
manifest.defaultBranch  = 'main'

process {
    withName:REFINDEX {
        container = 'glebusasha/bwa_samtools'
    }
    withName:QCONTROL {
        container = 'nanozoo/fastp:0.23.1--9f2e255'
    }
    withName:ALIGN {
        container = 'glebusasha/bwa_samtools'
    }  
    withName:PREPARE {
		container = 'glebusasha/bwa_samtools'
	}
    withName:VARCALL {
		container = 'google/deepvariant:1.6.1'
	}
    withName:ANNOTATE {
        container = 'mgibio/vep_helper-cwl:vep_105.0_v1'
	}
}

profiles {
    local {
        params.reference        = "/home/alexandr/Documents/reference/GCA_000001405.15_GRCh38_genomic.fna"
        params.reads            = '/home/alexandr/Documents/test/*[rR]{1,2}*.fastq*'
        params.faidx            = "/home/alexandr/Documents/reference/GCA_000001405.15_GRCh38_genomic.fna.fai"
        params.bwaidx           = "/home/alexandr/Documents/reference/bwaidx/*"
        params.cpus             = 12
        params.memory           = 15
    }
    server {
        params.reference        = "/dev/shm/aglebus/data/reference/GCA_000001405.15_GRCh38_genomic.fna"
        params.reads            = '/dev/shm/aglebus/data/test/*[rR]{1,2}*.fastq*'
        params.faidx            = "/dev/shm/aglebus/data/reference/faidx/GCA_000001405.15_GRCh38_genomic.fna.fai"
        params.bwaidx           = "/dev/shm/aglebus/data/reference/bwaidx/*"
        params.cpus             = 95
        params.memory           = 100
    }
    debug {
        cleanup                = false
        dumpHashes             = true
        process.beforeScript   = 'echo $HOSTNAME'
    }
    conda {
        conda.enabled          = true
        docker.enabled         = false
        singularity.enabled    = false
    }
    docker {
        conda.enabled          = false
        docker.enabled         = true
        singularity.enabled    = false
    }
    singularity {
        conda.enabled          = false
        docker.enabled         = false
        singularity.enabled    = true
    }
}